<!DOCTYPE html>
<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser-arcade-physics.min.js"></script>
</head>

<body>

    <script>
        var config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: {
                        y: 200
                    }
                }
            },
            scene: {
                preload: preload,
                create: create
            },
            title: 'Brick',
            version: '0.1b'
        };

        var game = new Phaser.Game(config);

        function preload() {

            this.load.glsl('bundle', '../assets/shaders/bundle2.glsl.js');

            this.load.image('ball', '../assets/games/brick/ball.png');

            this.load.spritesheet('invader1', '../assets/games/brick/brick0.webp', {
                frameWidth: 32,
                frameHeight: 32
            });
            this.load.spritesheet('invader2', '../assets/games/brick/brick1.png', {
                frameWidth: 32,
                frameHeight: 32
            });
            this.load.spritesheet('invader3', '../assets/games/brick/brick2.png', {
                frameWidth: 32,
                frameHeight: 32
            });
        }


        var graphics;

        function create() {
            graphics = this.add.graphics();

            var thickness = 1;
            var color = 0x00ff00;
            var alpha = 10;

            graphics.lineStyle(thickness, color, alpha);

            graphics.strokeRect(100, 70, 580, 250);

            var invader1 = this.add.group({
                key: 'invader1',
                frame: 0,
                repeat: 13,
                setXY: {
                    x: 32,
                    y: 100,
                    stepX: 40
                }
            });

            var invader2 = this.add.group([{
                key: 'invader2',
                frame: 0,
                repeat: 10,
                setXY: {
                    x: 32,
                    y: 148,
                    stepX: 52
                }
            }, {
                key: 'invader2',
                frame: 0,
                repeat: 10,
                setXY: {
                    x: 32,
                    y: 148 + 48,
                    stepX: 52
                }
            }]);

            var invader3 = this.add.group([{
                key: 'invader3',
                frame: 0,
                repeat: 9,
                setXY: {
                    x: 32,
                    y: 148 + 96,
                    stepX: 58
                }
            }, {
                key: 'invader3',
                frame: 0,
                repeat: 9,
                setXY: {
                    x: 32,
                    y: 148 + 96 + 48,
                    stepX: 58
                }
            }]);

            Phaser.Actions.IncX(invader1.getChildren(), 100);
            Phaser.Actions.IncX(invader2.getChildren(), 100);
            Phaser.Actions.IncX(invader3.getChildren(), 100);

            this.physics.add.existing(invader1, false);


            const text = this.add.text(80, 550, '', {
                font: '16px Courier',
                fill: '#ffffff'
            });

            text.setText([
                'Game Title: ' + game.config.gameTitle,
                'Version: ' + game.config.gameVersion
            ]);

            var ball = this.physics.add.image(400, 100, 'ball');

            ball.setVelocity(100, 200);
            ball.setBounce(1, 1);
            ball.setCollideWorldBounds(true);

            this.physics.add.existing(ball, false);


        }
    </script>

</body>

</html>